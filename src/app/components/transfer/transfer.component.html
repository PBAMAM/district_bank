<app-client-layout>
  <div class="transfer-container">
    <div class="transfer-content">
    <div class="transfer-card" [@fadeInUp]>
      <div class="transfer-title" [@scaleIn]>
        <h1>Transfer Money</h1>
        <span class="info-icon">ℹ️</span>
      </div>

      <div class="source-account" [@slideInRight]>
        <div class="account-info">
          <div class="account-icon">
            <span class="icon">S</span>
          </div>
          <div class="account-details">
            <div class="account-type">{{ selectedAccount?.accountType || 'Select Account' }}</div>
            <div class="account-iban">{{ selectedAccount?.iban || 'No account selected' }}</div>
          </div>
          <div class="account-balance">
            <div class="balance-amount">
              {{ selectedAccount ? formatCurrency(selectedAccount.balance, selectedAccount.currency) : '0.00 EUR' }}
            </div>
            <span class="info-icon">ℹ️</span>
          </div>
        </div>
        <a href="#" class="change-account-link">
          Change account
          <span class="arrow">→</span>
        </a>
      </div>

      <form [formGroup]="transferForm" (ngSubmit)="onSubmit()" class="transfer-form" [@fadeInUp]>
        <div class="form-group" [@slideInRight]>
          <label for="recipient">Recipient</label>
          <input
            type="text"
            id="recipient"
            formControlName="recipient"
            class="form-control"
            placeholder="Enter recipient name or IBAN"
            [class.error]="transferForm.get('recipient')?.invalid && transferForm.get('recipient')?.touched"
          >
        </div>

        <div class="form-group" [@slideInRight]>
          <label for="amount">Amount</label>
          <input
            type="number"
            id="amount"
            formControlName="amount"
            class="form-control"
            placeholder="0.00"
            step="0.01"
            min="0.01"
            [class.error]="transferForm.get('amount')?.invalid && transferForm.get('amount')?.touched"
          >
        </div>

        <div class="form-group" [@slideInRight]>
          <label for="description">Description</label>
          <input
            type="text"
            id="description"
            formControlName="description"
            class="form-control"
            placeholder="Enter transfer description"
            [class.error]="transferForm.get('description')?.invalid && transferForm.get('description')?.touched"
          >
        </div>

        <div class="form-group" [@slideInRight]>
          <label for="fromAccount">From Account</label>
          <select
            id="fromAccount"
            formControlName="fromAccount"
            class="form-control"
            (change)="onAccountChange($any($event.target).value)"
          >
            <option value="">Select Account</option>
            <option *ngFor="let account of accounts" [value]="account.id">
              {{ account.accountType }} - {{ formatCurrency(account.balance, account.currency) }}
            </option>
          </select>
        </div>

        <div class="form-actions">
          <button
            type="submit"
            class="btn btn-primary transfer-btn"
            [disabled]="transferForm.invalid || isLoading"
          >
            {{ isLoading ? 'Processing...' : 'Transfer' }}
          </button>
        </div>

        <div *ngIf="errorMessage" class="error-message" [@fadeIn]>
          <span class="error-icon">⚠️</span>
          {{ errorMessage }}
        </div>

        <div *ngIf="transferSuccess" class="success-message" [@fadeIn]>
          <span class="success-icon">✓</span>
          Transfer completed successfully!
        </div>
      </form>
    </div>
    </div>
  </div>
</app-client-layout>
